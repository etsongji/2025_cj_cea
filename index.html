<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì°½ì˜ì  ì²´í—˜í™œë™ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">ë¡œë”© ì¤‘...</div>
    </div>

    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [selectedGrade, setSelectedGrade] = useState('3');
            const [viewMode, setViewMode] = useState('table');
            const [selectedMonth, setSelectedMonth] = useState('3');
            const [searchTerm, setSearchTerm] = useState('');
            const [showAddForm, setShowAddForm] = useState(false);
            const [showExcelFormat, setShowExcelFormat] = useState(false);
            
            const [newActivity, setNewActivity] = useState({
                date: '',
                period: '',
                domain: 'ììœ¨',
                content: '',
                note: ''
            });

            const [allActivities, setAllActivities] = useState({
                '1': [
                    { id: 101, date: '2025.03.05', period: '5,6', domain: 'ììœ¨', content: 'ì‹ ì…ìƒ ì˜¤ë¦¬ì—”í…Œì´ì…˜', note: '' },
                    { id: 102, date: '2025.03.19', period: '5,6', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œí¥ë¯¸ê²€ì‚¬', note: '' },
                    { id: 103, date: '2025.03.26', period: '6,7', domain: 'ë™ì•„ë¦¬', content: 'ë™ì•„ë¦¬ ì¡°ì§', note: '' },
                    { id: 104, date: '2025.04.02', period: '7', domain: 'ë´‰ì‚¬', content: 'êµë‚´ í™˜ê²½ì •í™”', note: '(í™˜ê²½ë³´í˜¸í™œë™)' }
                ],
                '2': [
                    { id: 201, date: '2025.03.05', period: '6,7', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰í™œë™ ê³„íš', note: '' },
                    { id: 202, date: '2025.03.12', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œì ì„±ê²€ì‚¬', note: '' },
                    { id: 203, date: '2025.03.26', period: '5,6,7', domain: 'ë™ì•„ë¦¬', content: 'ì²´ìœ¡ë™ì•„ë¦¬ í™œë™', note: '' },
                    { id: 204, date: '2025.04.02', period: '7', domain: 'ë´‰ì‚¬', content: 'í›„ë°° ë©˜í† ë§', note: '(êµìœ¡í™œë™)' }
                ],
                '3': [
                    { id: 1, date: '2025.03.05', period: '6', domain: 'ììœ¨', content: 'ìƒëª…ì¡´ì¤‘ êµìœ¡', note: '' },
                    { id: 2, date: '2025.03.05', period: '7', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰ì§€í–¥í™œë™', note: '' },
                    { id: 3, date: '2025.03.12', period: '5', domain: 'ììœ¨', content: 'ì…í•™ì‹/ì‹œì—…ì‹', note: 'ì…í•™ì‹/ì‹œì—…ì‹' },
                    { id: 4, date: '2025.03.19', period: '6,7', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰ì§€í–¥í™œë™', note: '' },
                    { id: 5, date: '2025.03.26', period: '7', domain: 'ììœ¨', content: 'ì•ˆì „êµìœ¡', note: '' },
                    { id: 6, date: '2025.04.09', period: '5,6', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰ì§€í–¥í™œë™', note: '' },
                    { id: 7, date: '2025.05.14', period: '6', domain: 'ììœ¨', content: 'ë¯¸ì„¸ë¨¼ì§€êµìœ¡', note: '' },
                    { id: 8, date: '2025.06.25', period: '5', domain: 'ììœ¨', content: 'ì‚¬ì´ë²„í­ë ¥ì˜ˆë°©êµìœ¡', note: '' },
                    
                    { id: 9, date: '2025.03.12', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œ ë…ì„œì§€ë„íŠ¹í™” ë° í•™ê³¼ë³„ì§ì—…í™œë™', note: '' },
                    { id: 10, date: '2025.03.19', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'í•™ê³¼íŠ¹ìƒ‰ì§„ë¡œí™œë™', note: '' },
                    { id: 11, date: '2025.03.26', period: '5,6', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œì ì„±ê²€ì‚¬', note: '' },
                    { id: 12, date: '2025.04.23', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œ ë…ì„œí”„ë¡œì íŠ¸', note: '' },
                    
                    { id: 13, date: '2025.03.05', period: '5,6', domain: 'ë™ì•„ë¦¬', content: 'ë™ì•„ë¦¬ ì¡°ì§', note: '' },
                    { id: 14, date: '2025.03.19', period: '5,6', domain: 'ë™ì•„ë¦¬', content: 'ìˆ˜í•™ë™ì•„ë¦¬ í™œë™', note: '' },
                    { id: 15, date: '2025.03.26', period: '5,6,7', domain: 'ë™ì•„ë¦¬', content: 'ê³¼í•™ì‹¤í—˜ë™ì•„ë¦¬', note: '' },
                    { id: 16, date: '2025.04.16', period: '6,7', domain: 'ë™ì•„ë¦¬', content: 'ì˜ì–´í† ë¡ ë™ì•„ë¦¬', note: '' },
                    
                    { id: 17, date: '2025.03.12', period: '7', domain: 'ë´‰ì‚¬', content: 'í™˜ê²½ì •í™”í™œë™', note: '(í™˜ê²½ë³´í˜¸í™œë™)' },
                    { id: 18, date: '2025.03.26', period: '6', domain: 'ë´‰ì‚¬', content: 'êµë‚´ë„ì„œê´€ì •ë¦¬', note: '(êµìœ¡í™œë™)' },
                    { id: 19, date: '2025.04.09', period: '7', domain: 'ë´‰ì‚¬', content: 'ë´‰ì‚¬ì†Œì–‘êµìœ¡', note: '(í•™ì—…ë³´ì¶©í™œë™)' },
                    { id: 20, date: '2025.05.21', period: '5,6,7', domain: 'ë´‰ì‚¬', content: 'ë‚´ì™¸ ë´‰ì‚¬ì˜ ë‚ ', note: '(ì•„ë™ë³µì§€í™œë™)' }
                ]
            });

            const activities = allActivities[selectedGrade] || [];
            const domains = ['ììœ¨', 'ì§„ë¡œ', 'ë™ì•„ë¦¬', 'ë´‰ì‚¬'];
            const months = [
                { value: '3', label: '3ì›”' },
                { value: '4', label: '4ì›”' },
                { value: '5', label: '5ì›”' },
                { value: '6', label: '6ì›”' },
                { value: '7', label: '7ì›”' },
                { value: '8', label: '8ì›”' },
                { value: '9', label: '9ì›”' },
                { value: '10', label: '10ì›”' },
                { value: '11', label: '11ì›”' },
                { value: '12', label: '12ì›”' }
            ];

            const domainColors = {
                'ììœ¨': 'bg-yellow-100',
                'ì§„ë¡œ': 'bg-green-100',
                'ë™ì•„ë¦¬': 'bg-purple-100',
                'ë´‰ì‚¬': 'bg-pink-100'
            };

            // êµì‹œ ìˆ˜ ê³„ì‚°
            const calculatePeriodHours = (period) => {
                if (!period || period === '') return 0;
                const periods = period.split(',').map(p => p.trim()).filter(p => p !== '');
                return periods.length;
            };

            // ì˜ì—­ë³„ í™œë™ í•„í„°ë§
            const getActivitiesByDomain = (domain) => {
                return activities
                    .filter(activity => activity.domain === domain)
                    .filter(activity => 
                        searchTerm === '' || 
                        activity.content.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        activity.date.includes(searchTerm) ||
                        activity.note.toLowerCase().includes(searchTerm.toLowerCase())
                    )
                    .sort((a, b) => new Date(a.date.replace(/\./g, '-')) - new Date(b.date.replace(/\./g, '-')));
            };

            // í™œë™ ì¶”ê°€
            const handleAddActivity = () => {
                if (newActivity.date && newActivity.period && newActivity.content) {
                    const currentActivities = allActivities[selectedGrade] || [];
                    const maxId = Math.max(0, ...Object.values(allActivities).flat().map(a => a.id));
                    const id = maxId + 1;
                    const updatedActivities = [...currentActivities, { 
                        ...newActivity, 
                        id
                    }];
                    
                    setAllActivities({
                        ...allActivities,
                        [selectedGrade]: updatedActivities
                    });
                    
                    setNewActivity({ date: '', period: '', domain: 'ììœ¨', content: '', note: '' });
                    setShowAddForm(false);
                }
            };

            // í™œë™ ì‚­ì œ
            const handleDelete = (id) => {
                const currentActivities = allActivities[selectedGrade] || [];
                const updatedActivities = currentActivities.filter(activity => activity.id !== id);
                
                setAllActivities({
                    ...allActivities,
                    [selectedGrade]: updatedActivities
                });
            };

            // CSV í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ
            const downloadTemplate = () => {
                const templateData = [
                    ['ë‚ ì§œ', 'ì‹œê°„', 'êµì‹œ', 'ì˜ì—­', 'ë‚´ìš©', 'ë¹„ê³ '],
                    ['2025.03.04', '2', '1,2', 'ììœ¨', 'ì…í•™ì‹/ì‹œì—…ì‹', 'ì…í•™ì‹/ì‹œì—…ì‹'],
                    ['2025.03.05', '1', '5', 'ììœ¨', 'í•™êµí­ë ¥ì˜ˆë°©', ''],
                    ['2025.03.05', '1', '6', 'ììœ¨', 'ìƒëª…ì¡´ì¤‘ êµìœ¡', ''],
                    ['2025.03.12', '3', '5,6,7', 'ì§„ë¡œ', 'ì§„ë¡œíƒìƒ‰í™œë™', ''],
                    ['2025.03.19', '2', '6,7', 'ë™ì•„ë¦¬', 'ë™ì•„ë¦¬í™œë™', ''],
                    ['2025.03.26', '1', '7', 'ë´‰ì‚¬', 'í™˜ê²½ì •í™”í™œë™', '(í™˜ê²½ë³´í˜¸í™œë™)']
                ];

                const csvContent = templateData.map(row => 
                    row.map(cell => {
                        const cellStr = String(cell);
                        if (cellStr.includes(',') || cellStr.includes('"') || cellStr.includes('\n')) {
                            return `"${cellStr.replace(/"/g, '""')}"`;
                        }
                        return cellStr;
                    }).join(',')
                ).join('\n');

                const BOM = '\uFEFF';
                const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `${selectedGrade}í•™ë…„_ì°½ì²´í™œë™_í…œí”Œë¦¿.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            // í˜„ì¬ ë°ì´í„° ë‹¤ìš´ë¡œë“œ
            const downloadCurrentData = () => {
                if (activities.length === 0) {
                    alert('ë‹¤ìš´ë¡œë“œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                const headers = ['ë‚ ì§œ', 'ì‹œê°„', 'êµì‹œ', 'ì˜ì—­', 'ë‚´ìš©', 'ë¹„ê³ '];
                const csvData = [
                    headers,
                    ...activities.map(activity => [
                        activity.date,
                        calculatePeriodHours(activity.period),
                        activity.period,
                        activity.domain,
                        activity.content,
                        activity.note
                    ])
                ];

                const csvContent = csvData.map(row => 
                    row.map(cell => {
                        const cellStr = String(cell);
                        if (cellStr.includes(',') || cellStr.includes('"') || cellStr.includes('\n')) {
                            return `"${cellStr.replace(/"/g, '""')}"`;
                        }
                        return cellStr;
                    }).join(',')
                ).join('\n');

                const BOM = '\uFEFF';
                const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `${selectedGrade}í•™ë…„_ì°½ì²´í™œë™_í˜„ì¬ë°ì´í„°.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            return (
                <div className="max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen">
                    <div className="bg-white rounded-lg shadow-lg mb-6 p-6">
                        <h1 className="text-2xl font-bold text-gray-800 mb-4 text-center">
                            2025. {selectedGrade}í•™ë…„ ì°½ì²´ ì´ìˆ˜ì‹œê°„ ì…ë ¥ ì•ˆë‚´
                        </h1>
                        
                        {/* í•™ë…„ ì„ íƒ íƒ­ */}
                        <div className="mb-6">
                            <div className="flex justify-center">
                                <div className="flex border-2 border-gray-300 rounded-lg overflow-hidden bg-white">
                                    {['1', '2', '3'].map(grade => (
                                        <button
                                            key={grade}
                                            onClick={() => setSelectedGrade(grade)}
                                            className={`px-8 py-3 font-bold text-lg transition-colors ${
                                                selectedGrade === grade
                                                    ? 'bg-blue-600 text-white'
                                                    : 'bg-white text-gray-700 hover:bg-gray-50'
                                            }`}
                                        >
                                            {grade}í•™ë…„
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* ë³´ê¸° ëª¨ë“œ ì„ íƒ íƒ­ */}
                        <div className="mb-6">
                            <div className="flex justify-center">
                                <div className="flex border-2 border-gray-300 rounded-lg overflow-hidden bg-white">
                                    <button
                                        onClick={() => setViewMode('table')}
                                        className={`px-6 py-2 font-medium transition-colors ${
                                            viewMode === 'table'
                                                ? 'bg-green-600 text-white'
                                                : 'bg-white text-gray-700 hover:bg-gray-50'
                                        }`}
                                    >
                                        ğŸ“‹ ê´€ë¦¬ ëª¨ë“œ
                                    </button>
                                    <button
                                        onClick={() => setViewMode('schedule')}
                                        className={`px-6 py-2 font-medium transition-colors ${
                                            viewMode === 'schedule'
                                                ? 'bg-green-600 text-white'
                                                : 'bg-white text-gray-700 hover:bg-gray-50'
                                        }`}
                                    >
                                        ğŸ“… ì‹œê°„í‘œ ë³´ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* ì¡°ê±´ë¶€ ë Œë”ë§ */}
                    {viewMode === 'schedule' ? (
                        <div className="bg-white rounded-lg shadow-lg p-6">
                            <h2 className="text-xl font-bold mb-4">
                                {selectedGrade}í•™ë…„ {selectedMonth}ì›” ì°½ì˜ì  ì²´í—˜í™œë™ ì‹œê°„í‘œ
                            </h2>
                            <div className="text-center py-12">
                                <div className="text-6xl mb-4">ğŸ“…</div>
                                <h3 className="text-lg font-medium text-gray-500 mb-2">ì‹œê°„í‘œ ë³´ê¸° ëª¨ë“œ</h3>
                                <p className="text-gray-400">ì›”ë³„ ì‹œê°„í‘œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    ) : (
                        <div>
                            {/* ìƒë‹¨ ë„êµ¬ ëª¨ìŒ */}
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <div className="flex flex-wrap gap-4 items-center justify-between">
                                    <div className="flex gap-4 items-center">
                                        <div className="relative">
                                            <span className="absolute left-3 top-3 text-gray-400">ğŸ”</span>
                                            <input
                                                type="text"
                                                placeholder="í™œë™ë‚´ìš© ê²€ìƒ‰..."
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                className="w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        
                                        <button
                                            onClick={() => setShowAddForm(!showAddForm)}
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                                        >
                                            â• í™œë™ ì¶”ê°€
                                        </button>
                                    </div>
                                    
                                    <div className="flex gap-2">
                                        <button 
                                            onClick={downloadTemplate}
                                            className="px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors"
                                        >
                                            ğŸ“„ CSV í…œí”Œë¦¿
                                        </button>
                                        <button 
                                            onClick={downloadCurrentData}
                                            className="px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700"
                                        >
                                            ğŸ“¥ í˜„ì¬ ë°ì´í„°
                                        </button>
                                        <button
                                            onClick={() => setShowExcelFormat(!showExcelFormat)}
                                            className="px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700"
                                        >
                                            â„¹ï¸ í˜•ì‹ ì•ˆë‚´
                                        </button>
                                    </div>
                                </div>

                                {/* íŒŒì¼ í˜•ì‹ ì•ˆë‚´ */}
                                {showExcelFormat && (
                                    <div className="mt-4 p-4 bg-blue-50 border border-blue-200 rounded">
                                        <h3 className="font-bold mb-3 text-blue-800">ğŸ“Š íŒŒì¼ í˜•ì‹ ì•ˆë‚´</h3>
                                        <div className="text-sm text-blue-700 space-y-2">
                                            <p><strong>ì§€ì› íŒŒì¼:</strong> Excel (.xlsx, .xls), CSV (.csv)</p>
                                            <p><strong>í•„ìˆ˜ ì»¬ëŸ¼:</strong> ë‚ ì§œ, ì‹œê°„, êµì‹œ, ì˜ì—­, ë‚´ìš©</p>
                                            <p><strong>ì„ íƒ ì»¬ëŸ¼:</strong> ë¹„ê³ </p>
                                            <div className="mt-3">
                                                <p className="font-semibold mb-2">ì»¬ëŸ¼ëª… ì˜ˆì‹œ:</p>
                                                <div className="bg-white p-2 rounded border text-xs font-mono">
                                                    <div className="grid grid-cols-6 gap-2 font-bold border-b pb-1">
                                                        <span>ë‚ ì§œ</span>
                                                        <span>ì‹œê°„</span>
                                                        <span>êµì‹œ</span>
                                                        <span>ì˜ì—­</span>
                                                        <span>ë‚´ìš©</span>
                                                        <span>ë¹„ê³ </span>
                                                    </div>
                                                    <div className="grid grid-cols-6 gap-2 pt-1">
                                                        <span>2025.03.05</span>
                                                        <span>2</span>
                                                        <span>5,6</span>
                                                        <span>ììœ¨</span>
                                                        <span>í•™ê¸‰íŠ¹ìƒ‰í™œë™</span>
                                                        <span></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* í™œë™ ì¶”ê°€ í¼ */}
                                {showAddForm && (
                                    <div className="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded">
                                        <h3 className="font-bold mb-3">ìƒˆ í™œë™ ì¶”ê°€</h3>
                                        <div className="grid grid-cols-6 gap-3 mb-3">
                                            <div>
                                                <label className="block text-xs font-medium mb-1">ë‚ ì§œ</label>
                                                <input
                                                    type="text"
                                                    placeholder="2025.03.05"
                                                    value={newActivity.date}
                                                    onChange={(e) => setNewActivity({...newActivity, date: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-xs font-medium mb-1">êµì‹œ</label>
                                                <input
                                                    type="text"
                                                    placeholder="5,6,7"
                                                    value={newActivity.period}
                                                    onChange={(e) => setNewActivity({...newActivity, period: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-xs font-medium mb-1">ì˜ì—­</label>
                                                <select
                                                    value={newActivity.domain}
                                                    onChange={(e) => setNewActivity({...newActivity, domain: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                >
                                                    {domains.map(domain => (
                                                        <option key={domain} value={domain}>{domain}</option>
                                                    ))}
                                                </select>
                                            </div>
                                            <div className="col-span-3">
                                                <label className="block text-xs font-medium mb-1">ë‚´ìš©</label>
                                                <input
                                                    type="text"
                                                    value={newActivity.content}
                                                    onChange={(e) => setNewActivity({...newActivity, content: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-2 gap-3 mb-3">
                                            <div>
                                                <label className="block text-xs font-medium mb-1">ë¹„ê³ </label>
                                                <input
                                                    type="text"
                                                    placeholder="(í•™ì—…ë³´ì¶©í™œë™)"
                                                    value={newActivity.note}
                                                    onChange={(e) => setNewActivity({...newActivity, note: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                        </div>
                                        <div className="flex justify-end gap-2">
                                            <button
                                                onClick={handleAddActivity}
                                                className="px-4 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700"
                                            >
                                                ì¶”ê°€
                                            </button>
                                            <button
                                                onClick={() => setShowAddForm(false)}
                                                className="px-4 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700"
                                            >
                                                ì·¨ì†Œ
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* ì˜ì—­ë³„ í…Œì´ë¸” */}
                            <div className="space-y-8">
                                {domains.map(domain => {
                                    const domainActivities = getActivitiesByDomain(domain);
                                    return (
                                        <div key={domain} className="bg-white rounded-lg shadow-lg p-6">
                                            <div className="flex justify-between items-center mb-4">
                                                <h2 className={`text-lg font-bold p-3 rounded ${domainColors[domain]} border`}>
                                                    ã€{domain}ã€‘
                                                </h2>
                                                <span className="text-sm text-gray-600">
                                                    ì´ {domainActivities.length}ê°œ í™œë™, {domainActivities.reduce((sum, a) => sum + calculatePeriodHours(a.period), 0)}ì‹œê°„
                                                </span>
                                            </div>
                                            
                                            <div className="overflow-x-auto">
                                                <table className="w-full border-collapse border border-gray-400 text-sm">
                                                    <thead>
                                                        <tr className={domainColors[domain]}>
                                                            <th className="border border-gray-400 px-2 py-2 font-bold w-24">ë‚ ì§œ</th>
                                                            <th className="border border-gray-400 px-2 py-2 font-bold w-16">ì‹œê°„</th>
                                                            <th className="border border-gray-400 px-2 py-2 font-bold w-20">êµì‹œ</th>
                                                            <th className="border border-gray-400 px-2 py-2 font-bold">ë‚´ìš©</th>
                                                            <th className="border border-gray-400 px-2 py-2 font-bold w-32">ë¹„ê³ </th>
                                                            <th className="border border-gray-400 px-2 py-2 font-bold w-16">ì‘ì—…</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {domainActivities.length === 0 ? (
                                                            <tr>
                                                                <td colSpan="6" className="border border-gray-300 px-2 py-4 text-center text-gray-500">
                                                                    ë“±ë¡ëœ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.
                                                                </td>
                                                            </tr>
                                                        ) : (
                                                            domainActivities.map((activity) => (
                                                                <tr key={activity.id} className="hover:bg-gray-50">
                                                                    <td className="border border-gray-300 px-2 py-1 text-center">
                                                                        {activity.date}
                                                                    </td>
                                                                    <td className="border border-gray-300 px-2 py-1 text-center">
                                                                        {calculatePeriodHours(activity.period)}
                                                                    </td>
                                                                    <td className="border border-gray-300 px-2 py-1 text-center">
                                                                        {activity.period}
                                                                    </td>
                                                                    <td className="border border-gray-300 px-2 py-1">
                                                                        {activity.content}
                                                                    </td>
                                                                    <td className="border border-gray-300 px-2 py-1 text-red-600">
                                                                        {activity.note}
                                                                    </td>
                                                                    <td className="border border-gray-300 px-2 py-1 text-center">
                                                                        <button
                                                                            onClick={() => handleDelete(activity.id)}
                                                                            className="text-red-600 hover:text-red-800 text-xs"
                                                                        >
                                                                            âŒ
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            ))
                                                        )}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {/* í•˜ë‹¨ ìš”ì•½ ì •ë³´ */}
                            <div className="mt-8 bg-white rounded-lg shadow-lg p-6">
                                <div className="grid grid-cols-4 gap-4 text-center">
                                    {domains.map(domain => {
                                        const domainActivities = getActivitiesByDomain(domain);
                                        const totalHours = domainActivities.reduce((sum, a) => sum + calculatePeriodHours(a.period), 0);
                                        return (
                                            <div key={domain} className={`p-3 rounded border ${domainColors[domain]}`}>
                                                <h3 className="font-bold">{domain}</h3>
                                                <p className="text-sm">{domainActivities.length}ê°œ í™œë™</p>
                                                <p className="text-lg font-bold">{totalHours}ì‹œê°„</p>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // React ì•± ë Œë”ë§
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì°½ì˜ì  ì²´í—˜í™œë™ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { Plus, Download, Upload, FileText, X, Calendar, Search, AlertCircle } = lucide;

        function App() {
            const [selectedGrade, setSelectedGrade] = useState('3');
            const [viewMode, setViewMode] = useState('table');
            const [selectedMonth, setSelectedMonth] = useState('3');
            const [searchTerm, setSearchTerm] = useState('');
            const [showAddForm, setShowAddForm] = useState(false);
            const [showExcelFormat, setShowExcelFormat] = useState(false);
            
            const [newActivity, setNewActivity] = useState({
                date: '',
                period: '',
                domain: 'ììœ¨',
                content: '',
                note: ''
            });

            const [allActivities, setAllActivities] = useState({
                '1': [
                    { id: 101, date: '2025.03.05', period: '5,6', domain: 'ììœ¨', content: 'ì‹ ì…ìƒ ì˜¤ë¦¬ì—”í…Œì´ì…˜', note: '' },
                    { id: 102, date: '2025.03.19', period: '5,6', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œí¥ë¯¸ê²€ì‚¬', note: '' },
                    { id: 103, date: '2025.03.26', period: '6,7', domain: 'ë™ì•„ë¦¬', content: 'ë™ì•„ë¦¬ ì¡°ì§', note: '' },
                    { id: 104, date: '2025.04.02', period: '7', domain: 'ë´‰ì‚¬', content: 'êµë‚´ í™˜ê²½ì •í™”', note: '(í™˜ê²½ë³´í˜¸í™œë™)' }
                ],
                '2': [
                    { id: 201, date: '2025.03.05', period: '6,7', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰í™œë™ ê³„íš', note: '' },
                    { id: 202, date: '2025.03.12', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œì ì„±ê²€ì‚¬', note: '' },
                    { id: 203, date: '2025.03.26', period: '5,6,7', domain: 'ë™ì•„ë¦¬', content: 'ì²´ìœ¡ë™ì•„ë¦¬ í™œë™', note: '' },
                    { id: 204, date: '2025.04.02', period: '7', domain: 'ë´‰ì‚¬', content: 'í›„ë°° ë©˜í† ë§', note: '(êµìœ¡í™œë™)' }
                ],
                '3': [
                    { id: 1, date: '2025.03.05', period: '6', domain: 'ììœ¨', content: 'ìƒëª…ì¡´ì¤‘ êµìœ¡', note: '' },
                    { id: 2, date: '2025.03.05', period: '7', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰ì§€í–¥í™œë™', note: '' },
                    { id: 3, date: '2025.03.12', period: '5', domain: 'ììœ¨', content: 'ì…í•™ì‹/ì‹œì—…ì‹', note: 'ì…í•™ì‹/ì‹œì—…ì‹' },
                    { id: 4, date: '2025.03.19', period: '6,7', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰ì§€í–¥í™œë™', note: '' },
                    { id: 5, date: '2025.03.26', period: '7', domain: 'ììœ¨', content: 'ì•ˆì „êµìœ¡', note: '' },
                    { id: 6, date: '2025.04.09', period: '5,6', domain: 'ììœ¨', content: 'í•™ê¸‰íŠ¹ìƒ‰ì§€í–¥í™œë™', note: '' },
                    { id: 7, date: '2025.05.14', period: '6', domain: 'ììœ¨', content: 'ë¯¸ì„¸ë¨¼ì§€êµìœ¡', note: '' },
                    { id: 8, date: '2025.06.25', period: '5', domain: 'ììœ¨', content: 'ì‚¬ì´ë²„í­ë ¥ì˜ˆë°©êµìœ¡', note: '' },
                    
                    { id: 9, date: '2025.03.12', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œ ë…ì„œì§€ë„íŠ¹í™” ë° í•™ê³¼ë³„ì§ì—…í™œë™', note: '' },
                    { id: 10, date: '2025.03.19', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'í•™ê³¼íŠ¹ìƒ‰ì§„ë¡œí™œë™', note: '' },
                    { id: 11, date: '2025.03.26', period: '5,6', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œì ì„±ê²€ì‚¬', note: '' },
                    { id: 12, date: '2025.04.23', period: '5,6,7', domain: 'ì§„ë¡œ', content: 'ì§„ë¡œ ë…ì„œí”„ë¡œì íŠ¸', note: '' },
                    
                    { id: 13, date: '2025.03.05', period: '5,6', domain: 'ë™ì•„ë¦¬', content: 'ë™ì•„ë¦¬ ì¡°ì§', note: '' },
                    { id: 14, date: '2025.03.19', period: '5,6', domain: 'ë™ì•„ë¦¬', content: 'ìˆ˜í•™ë™ì•„ë¦¬ í™œë™', note: '' },
                    { id: 15, date: '2025.03.26', period: '5,6,7', domain: 'ë™ì•„ë¦¬', content: 'ê³¼í•™ì‹¤í—˜ë™ì•„ë¦¬', note: '' },
                    { id: 16, date: '2025.04.16', period: '6,7', domain: 'ë™ì•„ë¦¬', content: 'ì˜ì–´í† ë¡ ë™ì•„ë¦¬', note: '' },
                    
                    { id: 17, date: '2025.03.12', period: '7', domain: 'ë´‰ì‚¬', content: 'í™˜ê²½ì •í™”í™œë™', note: '(í™˜ê²½ë³´í˜¸í™œë™)' },
                    { id: 18, date: '2025.03.26', period: '6', domain: 'ë´‰ì‚¬', content: 'êµë‚´ë„ì„œê´€ì •ë¦¬', note: '(êµìœ¡í™œë™)' },
                    { id: 19, date: '2025.04.09', period: '7', domain: 'ë´‰ì‚¬', content: 'ë´‰ì‚¬ì†Œì–‘êµìœ¡', note: '(í•™ì—…ë³´ì¶©í™œë™)' },
                    { id: 20, date: '2025.05.21', period: '5,6,7', domain: 'ë´‰ì‚¬', content: 'ë‚´ì™¸ ë´‰ì‚¬ì˜ ë‚ ', note: '(ì•„ë™ë³µì§€í™œë™)' }
                ]
            });

            const activities = allActivities[selectedGrade] || [];
            const domains = ['ììœ¨', 'ì§„ë¡œ', 'ë™ì•„ë¦¬', 'ë´‰ì‚¬'];
            const months = [
                { value: '3', label: '3ì›”' },
                { value: '4', label: '4ì›”' },
                { value: '5', label: '5ì›”' },
                { value: '6', label: '6ì›”' },
                { value: '7', label: '7ì›”' },
                { value: '8', label: '8ì›”' },
                { value: '9', label: '9ì›”' },
                { value: '10', label: '10ì›”' },
                { value: '11', label: '11ì›”' },
                { value: '12', label: '12ì›”' }
            ];

            const domainColors = {
                'ììœ¨': 'bg-yellow-100',
                'ì§„ë¡œ': 'bg-green-100',
                'ë™ì•„ë¦¬': 'bg-purple-100',
                'ë´‰ì‚¬': 'bg-pink-100'
            };

            // êµì‹œ ìˆ˜ ê³„ì‚°
            const calculatePeriodHours = (period) => {
                if (!period || period === '') return 0;
                const periods = period.split(',').map(p => p.trim()).filter(p => p !== '');
                return periods.length;
            };

            // ì˜ì—­ë³„ í™œë™ í•„í„°ë§
            const getActivitiesByDomain = (domain) => {
                return activities
                    .filter(activity => activity.domain === domain)
                    .filter(activity => 
                        searchTerm === '' || 
                        activity.content.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        activity.date.includes(searchTerm) ||
                        activity.note.toLowerCase().includes(searchTerm.toLowerCase())
                    )
                    .sort((a, b) => new Date(a.date.replace(/\./g, '-')) - new Date(b.date.replace(/\./g, '-')));
            };

            // ì›”ë³„ ì‹œê°„í‘œ ë°ì´í„° ìƒì„±
            const generateMonthlySchedule = () => {
                const currentActivities = allActivities[selectedGrade] || [];
                
                const monthActivities = currentActivities.filter(activity => {
                    const activityMonth = activity.date.split('.')[1];
                    const normalizedActivityMonth = parseInt(activityMonth, 10).toString();
                    const normalizedSelectedMonth = parseInt(selectedMonth, 10).toString();
                    return normalizedActivityMonth === normalizedSelectedMonth;
                });

                const groupedByDate = monthActivities.reduce((groups, activity) => {
                    const date = activity.date;
                    if (!groups[date]) {
                        groups[date] = {};
                    }
                    
                    const periods = activity.period.split(',').map(p => p.trim());
                    periods.forEach(period => {
                        if (!groups[date][period]) {
                            groups[date][period] = [];
                        }
                        groups[date][period].push({
                            domain: activity.domain,
                            content: activity.content,
                            time: calculatePeriodHours(activity.period)
                        });
                    });
                    
                    return groups;
                }, {});

                return groupedByDate;
            };

            // í™œë™ ì¶”ê°€
            const handleAddActivity = () => {
                if (newActivity.date && newActivity.period && newActivity.content) {
                    const currentActivities = allActivities[selectedGrade] || [];
                    const maxId = Math.max(0, ...Object.values(allActivities).flat().map(a => a.id));
                    const id = maxId + 1;
                    const updatedActivities = [...currentActivities, { 
                        ...newActivity, 
                        id
                    }];
                    
                    setAllActivities({
                        ...allActivities,
                        [selectedGrade]: updatedActivities
                    });
                    
                    setNewActivity({ date: '', period: '', domain: 'ììœ¨', content: '', note: '' });
                    setShowAddForm(false);
                }
            };

            // í™œë™ ì‚­ì œ
            const handleDelete = (id) => {
                const currentActivities = allActivities[selectedGrade] || [];
                const updatedActivities = currentActivities.filter(activity => activity.id !== id);
                
                setAllActivities({
                    ...allActivities,
                    [selectedGrade]: updatedActivities
                });
            };

            // CSV í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ
            const downloadTemplate = () => {
                const templateData = [
                    ['ë‚ ì§œ', 'ì‹œê°„', 'êµì‹œ', 'ì˜ì—­', 'ë‚´ìš©', 'ë¹„ê³ '],
                    ['2025.03.04', '2', '1,2', 'ììœ¨', 'ì…í•™ì‹/ì‹œì—…ì‹', 'ì…í•™ì‹/ì‹œì—…ì‹'],
                    ['2025.03.05', '1', '5', 'ììœ¨', 'í•™êµí­ë ¥ì˜ˆë°©', ''],
                    ['2025.03.05', '1', '6', 'ììœ¨', 'ìƒëª…ì¡´ì¤‘ êµìœ¡', ''],
                    ['2025.03.12', '3', '5,6,7', 'ì§„ë¡œ', 'ì§„ë¡œíƒìƒ‰í™œë™', ''],
                    ['2025.03.19', '2', '6,7', 'ë™ì•„ë¦¬', 'ë™ì•„ë¦¬í™œë™', ''],
                    ['2025.03.26', '1', '7', 'ë´‰ì‚¬', 'í™˜ê²½ì •í™”í™œë™', '(í™˜ê²½ë³´í˜¸í™œë™)']
                ];

                const csvContent = templateData.map(row => 
                    row.map(cell => {
                        const cellStr = String(cell);
                        if (cellStr.includes(',') || cellStr.includes('"') || cellStr.includes('\n')) {
                            return `"${cellStr.replace(/"/g, '""')}"`;
                        }
                        return cellStr;
                    }).join(',')
                ).join('\n');

                const BOM = '\uFEFF';
                const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `${selectedGrade}í•™ë…„_ì°½ì²´í™œë™_í…œí”Œë¦¿.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            // í˜„ì¬ ë°ì´í„° ë‹¤ìš´ë¡œë“œ
            const downloadCurrentData = () => {
                if (activities.length === 0) {
                    alert('ë‹¤ìš´ë¡œë“œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                const headers = ['ë‚ ì§œ', 'ì‹œê°„', 'êµì‹œ', 'ì˜ì—­', 'ë‚´ìš©', 'ë¹„ê³ '];
                const csvData = [
                    headers,
                    ...activities.map(activity => [
                        activity.date,
                        calculatePeriodHours(activity.period),
                        activity.period,
                        activity.domain,
                        activity.content,
                        activity.note
                    ])
                ];

                const csvContent = csvData.map(row => 
                    row.map(cell => {
                        const cellStr = String(cell);
                        if (cellStr.includes(',') || cellStr.includes('"') || cellStr.includes('\n')) {
                            return `"${cellStr.replace(/"/g, '""')}"`;
                        }
                        return cellStr;
                    }).join(',')
                ).join('\n');

                const BOM = '\uFEFF';
                const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `${selectedGrade}í•™ë…„_ì°½ì²´í™œë™_í˜„ì¬ë°ì´í„°.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            // ì›”ë³„ ì‹œê°„í‘œ ì»´í¬ë„ŒíŠ¸
            const MonthlyScheduleView = () => {
                const scheduleData = generateMonthlySchedule();
                const dates = Object.keys(scheduleData).sort();
                const periods = ['1', '2', '3', '4', '5', '6', '7'];

                if (dates.length === 0) {
                    return (
                        <div className="text-center py-12">
                            <Calendar className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                            <h3 className="text-lg font-medium text-gray-500 mb-2">{selectedMonth}ì›” í™œë™ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                            <p className="text-gray-400">í•´ë‹¹ ì›”ì— ë“±ë¡ëœ ì°½ì˜ì  ì²´í—˜í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    );
                }

                return (
                    <div className="space-y-6">
                        <div className="flex justify-between items-center">
                            <h2 className="text-xl font-bold">
                                {selectedGrade}í•™ë…„ {selectedMonth}ì›” ì°½ì˜ì  ì²´í—˜í™œë™ ì‹œê°„í‘œ
                            </h2>
                            <select
                                value={selectedMonth}
                                onChange={(e) => setSelectedMonth(e.target.value)}
                                className="px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"
                            >
                                {months.map(month => (
                                    <option key={month.value} value={month.value}>{month.label}</option>
                                ))}
                            </select>
                        </div>

                        <div className="overflow-x-auto">
                            <table className="w-full border-collapse border border-gray-400 text-sm">
                                <thead>
                                    <tr className="bg-gray-200">
                                        <th className="border border-gray-400 px-3 py-2 font-bold w-32">ë‚ ì§œ</th>
                                        {periods.map(period => (
                                            <th key={period} className="border border-gray-400 px-3 py-2 font-bold w-24">
                                                {period}êµì‹œ
                                            </th>
                                        ))}
                                    </tr>
                                </thead>
                                <tbody>
                                    {dates.map(date => (
                                        <tr key={date} className="hover:bg-gray-50">
                                            <td className="border border-gray-400 px-3 py-3 font-medium bg-gray-100 text-center">
                                                <div className="text-sm font-bold">{date}</div>
                                                <div className="text-xs text-gray-600">
                                                    {new Date(date.replace(/\./g, '-')).toLocaleDateString('ko-KR', { weekday: 'short' })}
                                                </div>
                                            </td>
                                            {periods.map(period => {
                                                const periodActivities = scheduleData[date][period] || [];
                                                return (
                                                    <td key={period} className="border border-gray-400 px-2 py-1 text-center">
                                                        {periodActivities.length > 0 ? (
                                                            <div className="space-y-1">
                                                                {periodActivities.map((activity, idx) => (
                                                                    <div 
                                                                        key={idx}
                                                                        className={`px-2 py-1 rounded text-xs font-medium border ${domainColors[activity.domain]} ${
                                                                            activity.domain === 'ììœ¨' ? 'text-yellow-800' :
                                                                            activity.domain === 'ì§„ë¡œ' ? 'text-green-800' :
                                                                            activity.domain === 'ë™ì•„ë¦¬' ? 'text-purple-800' :
                                                                            'text-pink-800'
                                                                        }`}
                                                                    >
                                                                        <div className="font-bold">{activity.domain}</div>
                                                                        <div className="text-xs mt-1 leading-tight">
                                                                            {activity.content.length > 10 
                                                                                ? `${activity.content.substring(0, 10)}...`
                                                                                : activity.content
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        ) : (
                                                            <div className="text-gray-300 text-xs">-</div>
                                                        )}
                                                    </td>
                                                );
                                            })}
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>

                        {/* ì›”ë³„ í†µê³„ */}
                        <div className="mt-6 p-4 bg-gray-100 border rounded">
                            <h3 className="font-bold mb-3">{selectedMonth}ì›” í™œë™ í†µê³„</h3>
                            <div className="grid grid-cols-4 gap-4 text-center">
                                {domains.map(domain => {
                                    const domainActivities = activities.filter(a => {
                                        const activityMonth = a.date.split('.')[1];
                                        const normalizedActivityMonth = parseInt(activityMonth, 10).toString();
                                        const normalizedSelectedMonth = parseInt(selectedMonth, 10).toString();
                                        return normalizedActivityMonth === normalizedSelectedMonth && a.domain === domain;
                                    });
                                    const totalHours = domainActivities.reduce((sum, a) => sum + calculatePeriodHours(a.period), 0);
                                    return (
                                        <div key={domain} className={`p-3 rounded border ${domainColors[domain]}`}>
                                            <h4 className="font-bold">{domain}</h4>
                                            <p className="text-sm">{domainActivities.length}ê°œ í™œë™</p>
                                            <p className="text-lg font-bold">{totalHours}ì‹œê°„</p>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                );
            };

            // ì˜ì—­ë³„ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸
            const DomainTable = ({ domain }) => {
                const domainActivities = getActivitiesByDomain(domain);
                
                return (
                    <div className="mb-8">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className={`text-lg font-bold p-3 rounded ${domainColors[domain]} border`}>
                                ã€{domain}ã€‘
                            </h2>
                            <span className="text-sm text-gray-600">
                                ì´ {domainActivities.length}ê°œ í™œë™, {domainActivities.reduce((sum, a) => sum + calculatePeriodHours(a.period), 0)}ì‹œê°„
                            </span>
                        </div>
                        
                        <div className="overflow-x-auto">
                            <table className="w-full border-collapse border border-gray-400 text-sm">
                                <thead>
                                    <tr className={domainColors[domain]}>
                                        <th className="border border-gray-400 px-2 py-2 font-bold w-24">ë‚ ì§œ</th>
                                        <th className="border border-gray-400 px-2 py-2 font-bold w-16">ì‹œê°„</th>
                                        <th className="border border-gray-400 px-2 py-2 font-bold w-20">êµì‹œ</th>
                                        <th className="border border-gray-400 px-2 py-2 font-bold">ë‚´ìš©</th>
                                        <th className="border border-gray-400 px-2 py-2 font-bold w-32">ë¹„ê³ </th>
                                        <th className="border border-gray-400 px-2 py-2 font-bold w-16">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {domainActivities.length === 0 ? (
                                        <tr>
                                            <td colSpan="6" className="border border-gray-300 px-2 py-4 text-center text-gray-500">
                                                ë“±ë¡ëœ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.
                                            </td>
                                        </tr>
                                    ) : (
                                        domainActivities.map((activity) => (
                                            <tr key={activity.id} className="hover:bg-gray-50">
                                                <td className="border border-gray-300 px-2 py-1 text-center">
                                                    {activity.date}
                                                </td>
                                                <td className="border border-gray-300 px-2 py-1 text-center">
                                                    {calculatePeriodHours(activity.period)}
                                                </td>
                                                <td className="border border-gray-300 px-2 py-1 text-center">
                                                    {activity.period}
                                                </td>
                                                <td className="border border-gray-300 px-2 py-1">
                                                    {activity.content}
                                                </td>
                                                <td className="border border-gray-300 px-2 py-1 text-red-600">
                                                    {activity.note}
                                                </td>
                                                <td className="border border-gray-300 px-2 py-1 text-center">
                                                    <button
                                                        onClick={() => handleDelete(activity.id)}
                                                        className="text-red-600 hover:text-red-800 text-xs"
                                                    >
                                                        <X className="w-3 h-3" />
                                                    </button>
                                                </td>
                                            </tr>
                                        ))
                                    )}
                                </tbody>
                            </table>
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen">
                    <div className="bg-white rounded-lg shadow-lg mb-6 p-6">
                        <h1 className="text-2xl font-bold text-gray-800 mb-4 text-center">
                            2025. {selectedGrade}í•™ë…„ ì°½ì²´ ì´ìˆ˜ì‹œê°„ ì…ë ¥ ì•ˆë‚´
                        </h1>
                        
                        {/* í•™ë…„ ì„ íƒ íƒ­ */}
                        <div className="mb-6">
                            <div className="flex justify-center">
                                <div className="flex border-2 border-gray-300 rounded-lg overflow-hidden bg-white">
                                    {['1', '2', '3'].map(grade => (
                                        <button
                                            key={grade}
                                            onClick={() => setSelectedGrade(grade)}
                                            className={`px-8 py-3 font-bold text-lg transition-colors ${
                                                selectedGrade === grade
                                                    ? 'bg-blue-600 text-white'
                                                    : 'bg-white text-gray-700 hover:bg-gray-50'
                                            }`}
                                        >
                                            {grade}í•™ë…„
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* ë³´ê¸° ëª¨ë“œ ì„ íƒ íƒ­ */}
                        <div className="mb-6">
                            <div className="flex justify-center">
                                <div className="flex border-2 border-gray-300 rounded-lg overflow-hidden bg-white">
                                    <button
                                        onClick={() => setViewMode('table')}
                                        className={`px-6 py-2 font-medium transition-colors ${
                                            viewMode === 'table'
                                                ? 'bg-green-600 text-white'
                                                : 'bg-white text-gray-700 hover:bg-gray-50'
                                        }`}
                                    >
                                        ğŸ“‹ ê´€ë¦¬ ëª¨ë“œ
                                    </button>
                                    <button
                                        onClick={() => setViewMode('schedule')}
                                        className={`px-6 py-2 font-medium transition-colors ${
                                            viewMode === 'schedule'
                                                ? 'bg-green-600 text-white'
                                                : 'bg-white text-gray-700 hover:bg-gray-50'
                                        }`}
                                    >
                                        ğŸ“… ì‹œê°„í‘œ ë³´ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* ì¡°ê±´ë¶€ ë Œë”ë§ */}
                    {viewMode === 'schedule' ? (
                        <div className="bg-white rounded-lg shadow-lg p-6">
                            <MonthlyScheduleView />
                        </div>
                    ) : (
                        <div>
                            {/* ìƒë‹¨ ë„êµ¬ ëª¨ìŒ */}
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <div className="flex flex-wrap gap-4 items-center justify-between">
                                    <div className="flex gap-4 items-center">
                                        <div className="relative">
                                            <Search className="w-5 h-5 absolute left-3 top-3 text-gray-400" />
                                            <input
                                                type="text"
                                                placeholder="í™œë™ë‚´ìš© ê²€ìƒ‰..."
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                className="w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        
                                        <button
                                            onClick={() => setShowExcelFormat(!showExcelFormat)}
                                            className="px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700"
                                        >
                                            <AlertCircle className="w-4 h-4 inline mr-1" />
                                            í˜•ì‹ ì•ˆë‚´
                                        </button>
                                    </div>
                                </div>

                                {/* íŒŒì¼ í˜•ì‹ ì•ˆë‚´ */}
                                {showExcelFormat && (
                                    <div className="mt-4 p-4 bg-blue-50 border border-blue-200 rounded">
                                        <h3 className="font-bold mb-3 text-blue-800">ğŸ“Š íŒŒì¼ í˜•ì‹ ì•ˆë‚´</h3>
                                        <div className="text-sm text-blue-700 space-y-2">
                                            <p><strong>ì§€ì› íŒŒì¼:</strong> Excel (.xlsx, .xls), CSV (.csv)</p>
                                            <p><strong>í•„ìˆ˜ ì»¬ëŸ¼:</strong> ë‚ ì§œ, ì‹œê°„, êµì‹œ, ì˜ì—­, ë‚´ìš©</p>
                                            <p><strong>ì„ íƒ ì»¬ëŸ¼:</strong> ë¹„ê³ </p>
                                            <div className="mt-3">
                                                <p className="font-semibold mb-2">ì»¬ëŸ¼ëª… ì˜ˆì‹œ:</p>
                                                <div className="bg-white p-2 rounded border text-xs font-mono">
                                                    <div className="grid grid-cols-6 gap-2 font-bold border-b pb-1">
                                                        <span>ë‚ ì§œ</span>
                                                        <span>ì‹œê°„</span>
                                                        <span>êµì‹œ</span>
                                                        <span>ì˜ì—­</span>
                                                        <span>ë‚´ìš©</span>
                                                        <span>ë¹„ê³ </span>
                                                    </div>
                                                    <div className="grid grid-cols-6 gap-2 pt-1">
                                                        <span>2025.03.05</span>
                                                        <span>2</span>
                                                        <span>5,6</span>
                                                        <span>ììœ¨</span>
                                                        <span>í•™ê¸‰íŠ¹ìƒ‰í™œë™</span>
                                                        <span></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="mt-3">
                                                <p className="font-semibold">ğŸ’¡ íŒ:</p>
                                                <ul className="list-disc list-inside text-sm space-y-1">
                                                    <li>ì˜ì—­ì€ 'ììœ¨', 'ì§„ë¡œ', 'ë™ì•„ë¦¬', 'ë´‰ì‚¬' ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤</li>
                                                    <li>ë‚ ì§œ í˜•ì‹: 2025.03.05 ë˜ëŠ” 2025-03-05</li>
                                                    <li>êµì‹œëŠ” '5', '5,6', '5,6,7' í˜•ì‹ìœ¼ë¡œ ì…ë ¥</li>
                                                    <li>ì‹œê°„ì€ ìˆ«ìë¡œ ì…ë ¥ (1, 2, 3 ë“±)</li>
                                                    <li>CSV íŒŒì¼ì´ ì—‘ì…€ë³´ë‹¤ í˜¸í™˜ì„±ì´ ì¢‹ìŠµë‹ˆë‹¤</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* í™œë™ ì¶”ê°€ í¼ */}
                                {showAddForm && (
                                    <div className="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded">
                                        <h3 className="font-bold mb-3">ìƒˆ í™œë™ ì¶”ê°€</h3>
                                        <div className="grid grid-cols-6 gap-3 mb-3">
                                            <div>
                                                <label className="block text-xs font-medium mb-1">ë‚ ì§œ</label>
                                                <input
                                                    type="text"
                                                    placeholder="2025.03.05"
                                                    value={newActivity.date}
                                                    onChange={(e) => setNewActivity({...newActivity, date: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-xs font-medium mb-1">êµì‹œ</label>
                                                <input
                                                    type="text"
                                                    placeholder="5,6,7"
                                                    value={newActivity.period}
                                                    onChange={(e) => setNewActivity({...newActivity, period: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-xs font-medium mb-1">ì˜ì—­</label>
                                                <select
                                                    value={newActivity.domain}
                                                    onChange={(e) => setNewActivity({...newActivity, domain: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                >
                                                    {domains.map(domain => (
                                                        <option key={domain} value={domain}>{domain}</option>
                                                    ))}
                                                </select>
                                            </div>
                                            <div className="col-span-3">
                                                <label className="block text-xs font-medium mb-1">ë‚´ìš©</label>
                                                <input
                                                    type="text"
                                                    value={newActivity.content}
                                                    onChange={(e) => setNewActivity({...newActivity, content: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-2 gap-3 mb-3">
                                            <div>
                                                <label className="block text-xs font-medium mb-1">ë¹„ê³ </label>
                                                <input
                                                    type="text"
                                                    placeholder="(í•™ì—…ë³´ì¶©í™œë™)"
                                                    value={newActivity.note}
                                                    onChange={(e) => setNewActivity({...newActivity, note: e.target.value})}
                                                    className="w-full px-2 py-1 border rounded text-sm"
                                                />
                                            </div>
                                        </div>
                                        <div className="flex justify-end gap-2">
                                            <button
                                                onClick={handleAddActivity}
                                                className="px-4 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700"
                                            >
                                                ì¶”ê°€
                                            </button>
                                            <button
                                                onClick={() => setShowAddForm(false)}
                                                className="px-4 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700"
                                            >
                                                ì·¨ì†Œ
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* ì˜ì—­ë³„ í…Œì´ë¸” */}
                            <div className="space-y-8">
                                {domains.map(domain => (
                                    <div key={domain} className="bg-white rounded-lg shadow-lg p-6">
                                        <DomainTable domain={domain} />
                                    </div>
                                ))}
                            </div>

                            {/* í•˜ë‹¨ ìš”ì•½ ì •ë³´ */}
                            <div className="mt-8 bg-white rounded-lg shadow-lg p-6">
                                <div className="grid grid-cols-4 gap-4 text-center">
                                    {domains.map(domain => {
                                        const domainActivities = getActivitiesByDomain(domain);
                                        const totalHours = domainActivities.reduce((sum, a) => sum + calculatePeriodHours(a.period), 0);
                                        return (
                                            <div key={domain} className={`p-3 rounded border ${domainColors[domain]}`}>
                                                <h3 className="font-bold">{domain}</h3>
                                                <p className="text-sm">{domainActivities.length}ê°œ í™œë™</p>
                                                <p className="text-lg font-bold">{totalHours}ì‹œê°„</p>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>AddForm(!showAddForm)}
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                                        >
                                            <Plus className="w-4 h-4 inline mr-2" />
                                            í™œë™ ì¶”ê°€
                                        </button>
                                    </div>
                                    
                                    <div className="flex gap-2">
                                        <button 
                                            onClick={downloadTemplate}
                                            className="px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors"
                                        >
                                            <FileText className="w-4 h-4 inline mr-1" />
                                            CSV í…œí”Œë¦¿
                                        </button>
                                        <button 
                                            onClick={downloadCurrentData}
                                            className="px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700"
                                        >
                                            <Download className="w-4 h-4 inline mr-1" />
                                            í˜„ì¬ ë°ì´í„°
                                        </button>
                                        <button
                                            onClick={() => setShow